<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Assignment Browser</title>

<!-- Favicon -->
<link rel="icon" href="https://ssl.gstatic.com/classroom/favicon.png">

<style>
  html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    background: #000;
  }

  /* Invisible URL input to store the current URL (required for JS) */
  #urlInput {
    position: absolute;
    top: -100px;
    left: -100px;
    width: 1px;
    height: 1px;
    opacity: 0;
  }

  iframe {
    width: 100%;
    height: 100%;
    border: none;
  }
</style>
</head>
<body>

<input id="urlInput" type="text" />

<iframe id="viewer" allowfullscreen sandbox="allow-scripts allow-forms allow-same-origin allow-popups"></iframe>

<script>
  const viewer = document.getElementById('viewer');
  const urlInput = document.getElementById('urlInput');

  // Parse the current path to load the proxied site
  function getTargetUrl() {
    let path = window.location.pathname.slice(1); // remove leading /
    if (!path) return null;
    path = decodeURIComponent(path);

    if (path.startsWith("classroom://")) path = path.replace("classroom://", "https://");
    else if (!path.startsWith("http")) path = "https://" + path;

    return path;
  }

  function loadSite(url) {
    if (!url) return;

    // Store in invisible input for potential future JS
    urlInput.value = url;

    // Encode URL for proxy
    const proxyUrl = '/' + encodeURIComponent(url);
    viewer.src = proxyUrl;
  }

  // Initial load
  const targetUrl = getTargetUrl();
  if (targetUrl) loadSite(targetUrl);
  else {
    // Blank page if no URL
    viewer.srcdoc = "<html><body style='margin:0;background:#111;'></body></html>";
  }
</script>
</body>
</html>
